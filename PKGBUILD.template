# Maintainer: Hauke Rehfeld <aur@haukerehfeld.de>
pkgname="${_pkgbase}-${_model}"

# our own artificial version number, but per model
pkgver=4
pkgrel=3
pkgdesc="This is an autogenerated file, please see https://github.com/hrehfeld/archlinux-whisper.cpp-model"
arch=("i686" "x86_64")
url="${_baseurl}/tree/master/models"
license=("MIT")

makedepends=()
depends=()
conflicts=()
provides=()

_model_file="ggml-${_model}.bin"
_model_path="/usr/share/$pkgname/${_model_file}"

source=("$_model_url")
sha1sums=("$_model_sha1sum")


package() {
  install -Dm644 "${srcdir}/${_model_file}" "$pkgdir$_model_path"

  wrapper="whisper.cpp-${_model}"
  echo "#!/bin/sh
/usr/bin/whisper.cpp --model ${_model_path} "\"'$@'\" > "$srcdir/$wrapper"
  install -Dm755 "${srcdir}/$wrapper" "$pkgdir/usr/bin/$wrapper"


}
